<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini AI Platform Pro</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <div class="app-layout">
        <aside class="sidebar">
            <!-- Sidebar giữ nguyên như phiên bản trước -->
            <div class="sidebar-header">
                <button id="new-chat-btn" class="sidebar-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    <span>Cuộc trò chuyện mới</span>
                </button>
            </div>
            <nav class="chat-history-nav">
                <p class="history-title">Lịch sử</p>
                <ul id="chat-history-list"></ul>
            </nav>
            <div class="sidebar-footer">
                <div id="user-profile" class="user-profile">
                    <div class="user-avatar">
                       <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.5a.75.75 0 0 1 .75.75v.255a8.974 8.974 0 0 1 4.294 1.346.75.75 0 1 1-.788 1.292A7.476 7.476 0 0 0 12.75 5.5v-.25a.75.75 0 0 1-.75-.75Zm0 19a.75.75 0 0 1-.75-.75v-.255a8.974 8.974 0 0 1-4.294-1.346.75.75 0 1 1 .788-1.292A7.476 7.476 0 0 0 11.25 18.5v.25a.75.75 0 0 1 .75.75ZM4.5 12a.75.75 0 0 1-.75-.75v-.255a8.974 8.974 0 0 1-1.346-4.294.75.75 0 1 1 1.292-.788A7.476 7.476 0 0 0 4.5 7.25v.25a.75.75 0 0 1-.75.75Zm15 0a.75.75 0 0 1 .75.75v.255a8.974 8.974 0 0 1 1.346 4.294.75.75 0 1 1-1.292.788A7.476 7.476 0 0 0 19.5 16.75v-.25a.75.75 0 0 1 .75-.75ZM12 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0Zm-4.5-5.25a.75.75 0 0 1 .75.75v.085a5.5 5.5 0 0 0 4.5 4.915.75.75 0 0 1 0 1.5 5.5 5.5 0 0 0-4.5 4.915v.085a.75.75 0 0 1-1.5 0v-.085a5.5 5.5 0 0 0-4.5-4.915.75.75 0 0 1 0-1.5A5.5 5.5 0 0 0 7.5 6.835V6.75a.75.75 0 0 1 .75-.75Z"></path></svg>
                    </div>
                    <span id="user-name">Người dùng</span>
                </div>
                <div class="theme-switcher">
                    <input type="checkbox" id="theme-toggle">
                    <label for="theme-toggle" class="switch-label"></label>
                </div>
            </div>
        </aside>

        <main class="chat-area">
            <div class="chat-container">
                <div class="chat-box" id="chat-box">
                    <!-- Tin nhắn -->
                </div>
                
                <div class="input-area-container">
                    <!-- Nút Dừng tạo -->
                    <button id="stop-btn" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M4.5 4.5a.75.75 0 0 0 0 1.5h15a.75.75 0 0 0 0-1.5h-15Z"></path></svg>
                        Dừng tạo
                    </button>
                    <!-- Vùng xem trước ảnh -->
                    <div id="image-preview-container" style="display: none;">
                        <img id="image-preview" src="" alt="Image preview"/>
                        <button id="remove-image-btn">×</button>
                    </div>
                    
                    <footer class="chat-input-area">
                        <button id="upload-btn" class="input-action-btn" title="Tải ảnh lên">
                           <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="22" height="22"><path d="M11.999 15.001a.75.75 0 0 1-.53-1.28l4.25-4.25a.75.75 0 0 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-.53.22Zm-5.25-3a.75.75 0 0 1-.53-1.28l7.5-7.5a.75.75 0 0 1 1.06 1.06l-7.5 7.5a.75.75 0 0 1-.53.22Z"></path><path d="M11.999 15.001a.75.75 0 0 1-.53-.22l-4.25-4.25a.75.75 0 0 1 1.06-1.06l4.25 4.25a.75.75 0 0 1-.53 1.28ZM9.75 18.001a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 1 1.5 0v4.5a.75.75 0 0 1-.75.75Zm4.5 0a.75.75 0 0 1-.75-.75v-1.5a.75.75 0 0 1 1.5 0v1.5a.75.75 0 0 1-.75-.75Z"></path><path d="M12.024 21.001c-4.14 0-7.5-3.36-7.5-7.5s3.36-7.5 7.5-7.5c2.18 0 4.16.94 5.53 2.47a.75.75 0 1 1-1.06 1.06C15.46 8.51 13.82 7.5 12.024 7.5c-3.31 0-6 2.69-6 6s2.69 6 6 6a5.96 5.96 0 0 0 5.65-4.35.75.75 0 0 1 1.45.39A7.46 7.46 0 0 1 12.024 21.001Z"></path></svg>
                        </button>
                        <input type="file" id="image-upload" accept="image/*" style="display: none;">

                        <textarea id="user-input" placeholder="Hỏi bất cứ điều gì..." rows="1"></textarea>
                        
                        <button id="send-btn" class="input-action-btn send-btn" aria-label="Gửi tin nhắn">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 28.14 28.14 0 0 0 18.265-8.385.75.75 0 0 0 0-1.13A28.14 28.14 0 0 0 3.478 2.404Z"></path></svg>
                        </button>
                    </footer>
                    <div class="input-footer">
                        <div class="feature-toggle">
                            <label for="search-toggle-checkbox" class="search-toggle">
                                <input type="checkbox" id="search-toggle-checkbox">
                                <span class="toggle-slider"></span>
                                <span class="toggle-label">Tìm kiếm trên Web</span>
                            </label>
                        </div>
                         <p class="feature-tip">Tip: Nói "Ghi nhớ rằng..." để AI lưu thông tin.</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>